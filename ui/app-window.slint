import { Button, VerticalBox , HorizontalBox , TabWidget } from "std-widgets.slint";
import { GameInfo } from "game-info.slint";
import { LoginWindow, LoginState } from "login-window.slint";
import { GameInfoPage } from "pages/game-info-page.slint";
import { AboutPage } from "pages/about-page.slint";

export component AppWindow inherits Window {
    title: @tr("Closure Studio");
    icon: @image-url("images/closure_logo_ferris.png");

    in property <[GameInfo]> game-info-list;
    in-out property <LoginState> login-state;
    in-out property <string> login-status-text;

    callback login-requested <=> login-window.login-requested;
    callback register-requested <=> login-window.register-requested;
    callback open-ext-link(string);

    callback start-game <=> game-info-page.start-game;
    callback stop-game <=> game-info-page.stop-game;
    callback restart-game <=> game-info-page.restart-game;
    callback save-options <=> game-info-page.save-options;
    callback load-logs <=> game-info-page.load-logs;
    callback view-changed <=> game-info-page.view-changed;

    preferred-height: 1080px;
    preferred-width: 1920px;

    TabWidget {
        visible: login-state == LoginState.Logged;
        Tab {
            title: @tr("账号管理");

            VerticalLayout {
                game-info-page := GameInfoPage {
                    game-info-list: game-info-list;
                }
            }
        }

        Tab {
            title: @tr("关于");

            VerticalLayout {
                AboutPage {
                    
                }
            }
        }
    }

    login-window := LoginWindow {
        visible: login-state != LoginState.Logged;
        login-state: login-state;
        login-status-text: login-status-text;
    }
}
